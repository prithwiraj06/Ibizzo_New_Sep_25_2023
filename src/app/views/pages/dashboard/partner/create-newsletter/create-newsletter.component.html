<div>
  <div class="kt-portlet">
    <div class="kt-portlet__head kt-portlet__head--noborder">
      <div class="kt-portlet__head-label">
        <h3 class="kt-portlet__head-title">
          Create your template
        </h3>
      </div>
      <div
        class="kt-widget__action mb-3 mt-3 mr-3"
        style="float: right !important;"
      >
        <button
          type="button"
          class="btn btn-brand btn-bold btn-sm mr-2"
          [ngClass]="{
            'kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light ': loadingSave
          }"
          (click)="subscribe('save')"
        >
          Save
        </button>
        <button
          type="button"
          class="btn btn-brand btn-bold btn-sm"
          [ngClass]="{
            'kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light': loading
          }"
          (click)="subscribe()"
        >
          Save & Send
        </button>
      </div>
    </div>
    <kt-portlet-body class="pb-0">
      <form [formGroup]="templateForm">
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="" class="mandatory-field">Name</label>
              <input
                type="text"
                [ngClass]="
                  isControlHasError('templateName', 'required')
                    ? 'border-danger'
                    : ''
                "
                [(ngModel)]="templateName"
                class="form-control"
                formControlName="templateName"
                placeholder="Give a name for this Newsletter "
              />
              <mat-error *ngIf="isControlHasError('templateName', 'required')">
                Name is required
              </mat-error>
            </div>
            <div class="form-group">
              <label for="" class="mandatory-field">Subject</label>
              <input
                type="text"
                [ngClass]="
                  isControlHasError('subjectLine', 'required')
                    ? 'border-danger'
                    : ''
                "
                class="form-control"
                formControlName="subjectLine"
                placeholder="Write Email Subject line for your newsletter "
              />
              <mat-error *ngIf="isControlHasError('subjectLine', 'required')">
                Subject is required
              </mat-error>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <kt-newsletter-template
                [useTemplate]="useTemplate"
                (valueChange)="subscribe($event)"
                (id)="getTemplateId($event)"
                #newsletter
              ></kt-newsletter-template>
            </div>
          </div>
        </div>
      </form>
    </kt-portlet-body>
    <kt-portlet-footer class="mt-2">
      <div
        class="kt-widget__action mb-3 mt-3 mr-3"
        style="float: right !important;"
      >
        <button
          type="button"
          class="btn btn-brand btn-bold btn-sm mr-2"
          [ngClass]="{
            'kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light ': loadingSave
          }"
          (click)="subscribe('save')"
        >
          Save
        </button>
        <button
          type="button"
          class="btn btn-brand btn-bold btn-sm"
          [ngClass]="{
            'kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light': loading
          }"
          (click)="subscribe()"
        >
          Save & Send
        </button>
      </div>
    </kt-portlet-footer>
  </div>
</div>
